# ููุฎุต ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุธุงู ุงููุตุงุฏูุฉ

## ุงูุชุบููุฑุงุช ุงูููุชููุฉ โ

### 1. ุฅูุดุงุก ูุธุงู ูุตุงุฏูุฉ JWT ุฌุฏูุฏ
- **ุงูููู ุงูุฌุฏูุฏ**: `apps/backend/auth.ts`
  - ูุธุงู ูุตุงุฏูุฉ JWT ูุญุฏูุฏ ุงูููุช
  - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcrypt
  - endpoints ููุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู
  - middleware ููุญูุงูุฉ ูุงูุชุญูู ูู ุงููููุฉ

### 2. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุชุญุฏูุซ ูุฎุทุท ุงููุณุชุฎุฏููู** ูู `packages/shared/schema.ts`:
  - ุฅุถุงูุฉ ุญูู `password` (ูุทููุจ)
  - ุฅุถุงูุฉ `is_email_verified`
  - ุฅุถุงูุฉ `reset_password_token` ู `reset_password_expires`
  - ุฌุนู `email` ูุทููุจ
  - ุฅุฒุงูุฉ ุฌุฏูู `sessions`

### 3. ุชุญุฏูุซ ุทุจูุฉ ุงูุชุฎุฒูู
- **ุชุญุฏูุซ** `apps/backend/storage.ts`:
  - ุฅุถุงูุฉ `getUserByEmail()` ููุจุญุซ ุจุงูุฅูููู
  - ุฅุถุงูุฉ `createUser()` ูุฅูุดุงุก ูุณุชุฎุฏููู ุฌุฏุฏ
  - ุชุญุฏูุซ ูุงุฌูุฉ `IStorage`

### 4. ุชุญุฏูุซ ุงูุชุจุนูุงุช
- **ุฅุถุงูุฉ**:
  - `jsonwebtoken` - ุฅุฏุงุฑุฉ JWT tokens
  - `bcryptjs` - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
  - ุฃููุงุน TypeScript ุงูููุงุจูุฉ
- **ุฅุฒุงูุฉ** (ูู package.json):
  - ุงูุชุจุนูุงุช ุงูุฎุงุตุฉ ุจู Replit
  - Passport.js ู OpenID Client
  - Connect-PG-Simple

### 5. ูููุงุช ุงูุชูุซูู ูุงูุฃุฏูุฉ
- **ููู API ุฌุฏูุฏ**: `docs/API-v2.md` - ูุซุงุฆู ุดุงููุฉ ููู API ุงูุฌุฏูุฏ
- **ุฏููู ุงููุฌุฑุฉ**: `docs/MIGRATION-GUIDE.md` - ุฏููู ุดุงูู ููุชุญุฏูุซ
- **ููู ุงููุฌุฑุฉ**: `docs/migration-add-auth.sql` - ุฃูุงูุฑ SQL ููุชุญุฏูุซ
- **ูุชุบูุฑุงุช ุงูุจูุฆุฉ**: ุชุญุฏูุซ `.env.example`

### 6. ุญุฐู ุงููููุงุช ุงููุฏููุฉ
- โ ุญุฐู `apps/backend/replitAuth.ts` (ุงููุธุงู ุงููุฏูู)

## ุงูุชุบููุฑุงุช ุงููุทููุจุฉ ูุฏููุงู ๐ง

### 1. ุชุญุฏูุซ ููู ุงูุฎุงุฏู ุงูุฑุฆูุณู
ูุฌุจ ุชุญุฏูุซ `apps/backend/routes.ts` ูุงุณุชููุงู ุงุณุชุฎุฏุงู ุงููุธุงู ุงูุฌุฏูุฏ:

```typescript
// ุงุณุชุจุฏุงู ุฌููุน ุงููุฑุงุฌุน ุฅูู req.user.claims.sub
// ุจู req.user!.id

// ูุซุงู:
// ุงููุฏูู: const userId = req.user.claims.sub;
// ุงูุฌุฏูุฏ: const userId = req.user!.id;
```

### 2. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
npm install jsonwebtoken bcryptjs
npm install --save-dev @types/jsonwebtoken @types/bcryptjs
npm uninstall openid-client passport passport-local connect-pg-simple
```

### 3. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
ุชุดุบูู ุฃูุงูุฑ SQL ูู `docs/migration-add-auth.sql`:

```sql
ALTER TABLE users ADD COLUMN password varchar NOT NULL DEFAULT '';
ALTER TABLE users ADD COLUMN is_email_verified boolean DEFAULT false;
-- ... ุจุงูู ุงูุฃูุงูุฑ ูู ุงูููู
```

### 4. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ุชุญุฏูุซ ููู `.env`:

```env
# ุฅุถุงูุฉ
JWT_SECRET=your-super-secure-jwt-secret-key-here
JWT_EXPIRES_IN=7d

# ุญุฐู
# REPLIT_DOMAINS=
# ISSUER_URL=
# REPL_ID=
# SESSION_SECRET=
```

### 5. ุชุญุฏูุซ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)
ูุฌุจ ุชุญุฏูุซ ุงูููุฏ ูู `apps/frontend/` ูุงุณุชุฎุฏุงู:
- ูุธุงู ุงูุชุณุฌูู ูุงูุฏุฎูู ุงูุฌุฏูุฏ
- ุฅุฑุณุงู JWT tokens ูู headers
- ุฅุฒุงูุฉ ุงุนุชูุงุฏ ุนูู Replit auth

## ุงูููุงุฆุฏ ุงููุญููุฉ ๐ฏ

1. **ุงุณุชููุงููุฉ ุงูููุตุฉ**: ูุง ูุนุชูุฏ ุนูู Replit
2. **ุฃูุงู ูุญุณู**: JWT tokens ูุน ุชุดููุฑ bcrypt
3. **ูุฑููุฉ ุฃูุจุฑ**: ุฅููุงููุฉ ุฅุถุงูุฉ ููุฒุงุช ูุซู ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
4. **ุณูููุฉ ุงููุดุฑ**: ูููู ูุดุฑู ุนูู ุฃู ุฎุฏูุฉ ุงุณุชุถุงูุฉ
5. **ุชูุงูู ุฃูุณุน**: ูุนูู ูุน ุฃู frontend framework

## ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ ๐

1. ุชุซุจูุช ุงูุชุจุนูุงุช ุงูุฌุฏูุฏุฉ
2. ุชุดุบูู migration ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุงุฎุชุจุงุฑ API endpoints ุงูุฌุฏูุฏุฉ
5. ุชุญุฏูุซ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
6. ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุดุงููุฉ

## ููุงุญุธุงุช ุฃูููุฉ ๐

- ุงุณุชุฎุฏู JWT_SECRET ููู ููุนูุฏ
- ุชุฃูุฏ ูู HTTPS ูู ุงูุฅูุชุงุฌ
- ููุฑ ูู ุฅุถุงูุฉ rate limiting
- ุงุนุชุจุฑ ุฅุถุงูุฉ email verification
- ูู ุจูุฑุงุฌุนุฉ ุฃูููุฉ ุดุงููุฉ ูุจู ุงููุดุฑ